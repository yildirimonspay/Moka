2025-11-10 00:30:56.484 +03:00 [Warning] Microsoft.EntityFrameworkCore.Model.Validation No store type was specified for the decimal property '"Amount"' on entity type '"PaymentEntity"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-10 00:32:42.810 +03:00 [Warning] Microsoft.EntityFrameworkCore.Model.Validation No store type was specified for the decimal property '"Amount"' on entity type '"PaymentEntity"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-10 00:40:15.671 +03:00 [Warning] Microsoft.EntityFrameworkCore.Model.Validation No store type was specified for the decimal property '"Amount"' on entity type '"PaymentEntity"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-10 00:41:38.713 +03:00 [Error] Microsoft.EntityFrameworkCore.Database.Command Failed executing DbCommand ("49"ms) [Parameters=["@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 8), @p4='?' (Size = 450), @p5='?' (Size = 32), @p6='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Payments] ([Amount], [CodeForHash], [CreatedUtc], [Currency], [OtherTrxCode], [Status], [TrxCode])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);"
2025-11-10 00:41:38.733 +03:00 [Error] Microsoft.EntityFrameworkCore.Update An exception occurred in the database while saving changes for context type '"Moka.Api.Data.MokaDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Payments'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:ee56af51-2cb1-45d6-b6b5-dca3697219fc
Error Number:208,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Payments'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:ee56af51-2cb1-45d6-b6b5-dca3697219fc
Error Number:208,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-11-10 00:41:38.852 +03:00 [Error] Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Payments'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:ee56af51-2cb1-45d6-b6b5-dca3697219fc
Error Number:208,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Moka.Api.Controllers.MokaController.Pay(DealerPaymentServicePaymentRequest request) in D:\Projects\Other\Moka\MokaGateway\Moka.Api\Controllers\MokaController.cs:line 93
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Moka.Api.Middleware.ApiKeyMiddleware.InvokeAsync(HttpContext context) in D:\Projects\Other\Moka\MokaGateway\Moka.Api\Middleware\ApiKeyMiddleware.cs:line 30
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-11-10 00:49:42.489 +03:00 [Warning] Microsoft.EntityFrameworkCore.Model.Validation No store type was specified for the decimal property '"Amount"' on entity type '"PaymentEntity"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-10 00:50:28.017 +03:00 [Information] Moka.Api.Controllers.MokaController Stored payment otherTrx="VN09112025214956722" trxCode="ORDER-VN09112025214956722" amount=100.99
2025-11-10 01:16:19.303 +03:00 [Warning] Microsoft.EntityFrameworkCore.Model.Validation No store type was specified for the decimal property '"Amount"' on entity type '"PaymentEntity"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-10 01:17:04.281 +03:00 [Information] Moka.Api.Controllers.MokaController Stored payment otherTrx="VN09112025221651887" trxCode="ORDER-VN09112025221651887" amount=100.99
2025-11-10 01:19:30.277 +03:00 [Warning] Microsoft.EntityFrameworkCore.Model.Validation No store type was specified for the decimal property '"Amount"' on entity type '"PaymentEntity"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-10 01:19:30.790 +03:00 [Information]  DB migration completed
2025-11-10 01:19:30.943 +03:00 [Information]  Moka.Api started
2025-11-10 01:20:06.829 +03:00 [Information] Moka.Api.Controllers.MokaController Stored payment otherTrx="VN09112025221938716" trxCode="ORDER-VN09112025221938716" amount=100.99
2025-11-10 01:20:06.839 +03:00 [Information] Serilog.AspNetCore.RequestLoggingMiddleware HTTP "POST" "/moka/pay" responded 200 in 27951.0457 ms
2025-11-10 01:23:10.625 +03:00 [Warning] Microsoft.EntityFrameworkCore.Model.Validation No store type was specified for the decimal property '"Amount"' on entity type '"PaymentEntity"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-10 01:23:11.121 +03:00 [Information]  DB migration completed
2025-11-10 01:23:11.251 +03:00 [Information]  Moka.Api started
2025-11-10 01:23:32.668 +03:00 [Information] Moka.Api.Controllers.MokaController Stored payment otherTrx="VN09112025222325602" trxCode="ORDER-VN09112025222325602" amount=100.99
2025-11-10 01:23:32.678 +03:00 [Information] Serilog.AspNetCore.RequestLoggingMiddleware HTTP "POST" "/moka/pay" responded 200 in 6898.1048 ms
2025-11-10 01:54:53.512 +03:00 [Warning] Microsoft.EntityFrameworkCore.Model.Validation No store type was specified for the decimal property '"Amount"' on entity type '"PaymentEntity"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-10 01:54:54.291 +03:00 [Information]  DB migration completed
2025-11-10 01:54:54.477 +03:00 [Information]  Moka.Api started
2025-11-10 17:17:56.376 +03:00 [Information]  DB migration completed
2025-11-10 17:17:56.615 +03:00 [Information]  Moka.Api started
2025-11-10 17:29:16.048 +03:00 [Information] Moka.Api.Controllers.PaymentDealer 3D request Amount=100.99 Currency="TL" MaskedCard="540669******1173"
2025-11-10 17:29:16.502 +03:00 [Information] Serilog.AspNetCore.RequestLoggingMiddleware HTTP "POST" "/PaymentDealer/DoDirectPaymentThreeD" responded 200 in 535.2924 ms
2025-11-10 17:31:06.541 +03:00 [Information] Serilog.AspNetCore.RequestLoggingMiddleware HTTP "GET" "/PaymentDealer/PaymentDealerThreeDProcess" responded 401 in 7.3820 ms
2025-11-10 17:31:06.566 +03:00 [Information] Serilog.AspNetCore.RequestLoggingMiddleware HTTP "GET" "/favicon.ico" responded 401 in 0.5288 ms
2025-11-10 17:35:39.222 +03:00 [Information]  DB migration completed
2025-11-10 17:35:39.458 +03:00 [Information]  Moka.Api started
2025-11-10 17:36:05.425 +03:00 [Information] Moka.Api.Controllers.PaymentDealerContoller 3D request Amount=100.99 Currency="TL" MaskedCard="979236******0872"
2025-11-10 17:36:05.800 +03:00 [Information] Serilog.AspNetCore.RequestLoggingMiddleware HTTP "POST" "/PaymentDealer/DoDirectPaymentThreeD" responded 200 in 471.8794 ms
2025-11-10 17:36:26.702 +03:00 [Information] Moka.Api.Controllers.PaymentDealerContoller 3D request Amount=100.99 Currency="TL" MaskedCard="979236******0872"
2025-11-10 17:36:26.759 +03:00 [Information] Serilog.AspNetCore.RequestLoggingMiddleware HTTP "POST" "/PaymentDealer/DoDirectPaymentThreeD" responded 200 in 59.8069 ms
2025-11-10 17:38:58.320 +03:00 [Information]  DB migration completed
2025-11-10 17:38:58.532 +03:00 [Information]  Moka.Api started
2025-11-10 17:41:58.458 +03:00 [Information]  DB migration completed
2025-11-10 17:41:58.679 +03:00 [Information]  Moka.Api started
2025-11-10 17:42:08.933 +03:00 [Information] Moka.Api.Controllers.PaymentDealerContoller 3D request Amount=100.99 Currency="TL" MaskedCard="517041******7022"
2025-11-10 17:42:09.419 +03:00 [Information] Serilog.AspNetCore.RequestLoggingMiddleware HTTP "POST" "/PaymentDealer/DoDirectPaymentThreeD" responded 200 in 584.3144 ms
2025-11-10 17:42:10.511 +03:00 [Information] Serilog.AspNetCore.RequestLoggingMiddleware HTTP "GET" "/PaymentDealer/PaymentDealerThreeDProcess" responded 401 in 4.4838 ms
2025-11-10 17:42:10.541 +03:00 [Information] Serilog.AspNetCore.RequestLoggingMiddleware HTTP "GET" "/favicon.ico" responded 401 in 0.4972 ms
2025-11-10 17:46:16.709 +03:00 [Information]  DB migration completed
2025-11-10 17:46:16.937 +03:00 [Information]  Moka.Api started
2025-11-10 17:46:26.087 +03:00 [Information] Moka.Api.Controllers.PaymentDealerContoller 3D request Amount=100.99 Currency="TL" MaskedCard="517041******7022"
2025-11-10 17:46:26.594 +03:00 [Information] Serilog.AspNetCore.RequestLoggingMiddleware HTTP "POST" "/PaymentDealer/DoDirectPaymentThreeD" responded 200 in 578.3499 ms
2025-11-10 17:46:50.278 +03:00 [Information] Serilog.AspNetCore.RequestLoggingMiddleware HTTP "GET" "/PaymentDealer/PaymentDealerThreeDProcess" responded 200 in 21087.7052 ms
2025-11-10 17:46:50.341 +03:00 [Information] Serilog.AspNetCore.RequestLoggingMiddleware HTTP "GET" "/favicon.ico" responded 401 in 6.9350 ms
2025-11-10 17:47:18.594 +03:00 [Information] Serilog.AspNetCore.RequestLoggingMiddleware HTTP "POST" "/PaymentDealer/PaymentDealerThreeDProcess" responded 200 in 15463.4795 ms
2025-11-10 17:47:18.627 +03:00 [Information] Serilog.AspNetCore.RequestLoggingMiddleware HTTP "GET" "/favicon.ico" responded 401 in 0.5456 ms
2025-11-10 17:55:26.408 +03:00 [Information]  DB migration completed
2025-11-10 17:55:26.633 +03:00 [Information]  Moka.Api started
2025-11-10 17:55:36.702 +03:00 [Information] Moka.Api.Controllers.PaymentDealerContoller 3D request Amount=100.99 Currency="TL" MaskedCard="540669******1173"
2025-11-10 17:55:37.153 +03:00 [Information] Serilog.AspNetCore.RequestLoggingMiddleware HTTP "POST" "/PaymentDealer/DoDirectPaymentThreeD" responded 200 in 523.2543 ms
2025-11-10 17:55:41.390 +03:00 [Information] Serilog.AspNetCore.RequestLoggingMiddleware HTTP "GET" "/PaymentDealer/PaymentDealerThreeDProcess" responded 200 in 3179.4449 ms
2025-11-10 17:55:41.455 +03:00 [Information] Serilog.AspNetCore.RequestLoggingMiddleware HTTP "GET" "/favicon.ico" responded 404 in 0.1223 ms
2025-11-10 17:55:55.707 +03:00 [Information] Serilog.AspNetCore.RequestLoggingMiddleware HTTP "POST" "/PaymentDealer/PaymentDealerThreeDProcess" responded 200 in 9420.9936 ms
2025-11-10 17:59:11.687 +03:00 [Information]  DB migration completed
2025-11-10 17:59:11.879 +03:00 [Information]  Moka.Api started
2025-11-10 17:59:27.283 +03:00 [Information] Moka.Api.Controllers.PaymentDealerContoller 3D request Amount=100.99 Currency="TL" MaskedCard="517041******7022"
2025-11-10 17:59:27.730 +03:00 [Information] Serilog.AspNetCore.RequestLoggingMiddleware HTTP "POST" "/PaymentDealer/DoDirectPaymentThreeD" responded 200 in 515.6642 ms
2025-11-10 17:59:37.790 +03:00 [Information] Serilog.AspNetCore.RequestLoggingMiddleware HTTP "GET" "/PaymentDealer/PaymentDealerThreeDProcess" responded 200 in 2279.2621 ms
2025-11-10 18:00:02.903 +03:00 [Warning] Moka.Api.Controllers.PaymentDealerContoller Failed to POST OTP failure back to merchant
System.Net.Http.HttpRequestException: No connection could be made because the target machine actively refused it. (localhost:5283)
 ---> System.Net.Sockets.SocketException (10061): No connection could be made because the target machine actively refused it.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.AddHttp11ConnectionAsync(QueueItem queueItem)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.HttpConnectionWaiter`1.WaitForConnectionWithTelemetryAsync(HttpRequestMessage request, HttpConnectionPool pool, Boolean async, CancellationToken requestCancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at Moka.Api.Controllers.PaymentDealerContoller.SendMerchantFailureAsync(PaymentEntity entity, String message) in D:\Projects\Other\Moka\MokaGateway\Moka.Api\Controllers\PaymentDealerContoller.cs:line 323
2025-11-10 18:00:02.910 +03:00 [Information] Serilog.AspNetCore.RequestLoggingMiddleware HTTP "POST" "/PaymentDealer/PaymentDealerThreeDProcess" responded 200 in 19001.2781 ms
2025-11-10 18:00:20.126 +03:00 [Information] Moka.Api.Controllers.PaymentDealerContoller 3D request Amount=100.99 Currency="TL" MaskedCard="517040******3637"
2025-11-10 18:00:20.150 +03:00 [Information] Serilog.AspNetCore.RequestLoggingMiddleware HTTP "POST" "/PaymentDealer/DoDirectPaymentThreeD" responded 200 in 25.7987 ms
2025-11-10 18:00:27.791 +03:00 [Information] Serilog.AspNetCore.RequestLoggingMiddleware HTTP "GET" "/PaymentDealer/PaymentDealerThreeDProcess" responded 200 in 1298.3784 ms
2025-11-10 18:01:29.993 +03:00 [Information]  DB migration completed
2025-11-10 18:01:30.204 +03:00 [Information]  Moka.Api started
2025-11-10 18:01:58.143 +03:00 [Information]  DB migration completed
2025-11-10 18:01:58.340 +03:00 [Information]  Moka.Api started
2025-11-10 18:05:37.470 +03:00 [Information]  DB migration completed
2025-11-10 18:05:37.665 +03:00 [Information]  Moka.Api started
2025-11-10 18:05:48.206 +03:00 [Information] Moka.Api.Controllers.PaymentDealerContoller 3D request Amount=100.99 Currency="TL" MaskedCard="540669******1173"
2025-11-10 18:05:48.822 +03:00 [Information] Serilog.AspNetCore.RequestLoggingMiddleware HTTP "POST" "/PaymentDealer/DoDirectPaymentThreeD" responded 200 in 706.4789 ms
2025-11-10 18:05:55.477 +03:00 [Information] Serilog.AspNetCore.RequestLoggingMiddleware HTTP "GET" "/PaymentDealer/PaymentDealerThreeDProcess" responded 200 in 3372.0189 ms
2025-11-10 18:06:14.785 +03:00 [Warning] Moka.Api.Controllers.PaymentDealerContoller Failed to POST OTP failure back to merchant
System.Net.Http.HttpRequestException: No connection could be made because the target machine actively refused it. (localhost:5283)
 ---> System.Net.Sockets.SocketException (10061): No connection could be made because the target machine actively refused it.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.AddHttp11ConnectionAsync(QueueItem queueItem)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.HttpConnectionWaiter`1.WaitForConnectionWithTelemetryAsync(HttpRequestMessage request, HttpConnectionPool pool, Boolean async, CancellationToken requestCancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at Moka.Api.Controllers.PaymentDealerContoller.SendMerchantFailureAsync(PaymentEntity entity, String message) in D:\Projects\Other\Moka\MokaGateway\Moka.Api\Controllers\PaymentDealerContoller.cs:line 323
2025-11-10 18:06:14.791 +03:00 [Information] Serilog.AspNetCore.RequestLoggingMiddleware HTTP "POST" "/PaymentDealer/PaymentDealerThreeDProcess" responded 200 in 14300.9281 ms
2025-11-10 18:07:36.513 +03:00 [Information]  DB migration completed
2025-11-10 18:07:36.740 +03:00 [Information]  Moka.Api started
2025-11-10 18:07:53.189 +03:00 [Information] Moka.Api.Controllers.PaymentDealerContoller 3D request Amount=100.99 Currency="TL" MaskedCard="540669******1173"
2025-11-10 18:07:53.742 +03:00 [Information] Serilog.AspNetCore.RequestLoggingMiddleware HTTP "POST" "/PaymentDealer/DoDirectPaymentThreeD" responded 200 in 9580.5853 ms
2025-11-10 18:07:54.056 +03:00 [Information] Serilog.AspNetCore.RequestLoggingMiddleware HTTP "GET" "/PaymentDealer/PaymentDealerThreeDProcess" responded 200 in 112.9555 ms
